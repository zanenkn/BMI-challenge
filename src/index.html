<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="style.css">
    <script src="js/person.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/tabs.js"></script>
</head>

<body>
<div class="tab">
        <button class="tablinks" onclick="openTab(event, 'Metric')" id="def">Metric</button>
        <button class="tablinks" onclick="openTab(event, 'Imperial')">Imperial</button>
</div>
        


      <div id="Metric" class="tabcontent">

            <form id="calculate_metric">
                    <div id="metric-inputs">
                        <input type="text" id="weight-in-kgs" placeholder="Weight">
                        <input type="text" id="height-in-cm" placeholder="Height">
                    </div>
            
                    <button type="submit" value="Calculate" id="metric"> Calculate </button>
            </form>
            <div>
                <span id="display_metric_value"></span>
                <span id="display_metric_message"></span>
            </div>
            
                <script type="text/javascript">
                    const global = {}
            
                    global.calculateMetric = document.querySelector('#calculate_metric');
                    global.displayValueMetric = document.querySelector('#display_metric_value');
                    global.displayMessageMetric = document.querySelector('#display_metric_message');
            
                    document.addEventListener('DOMContentLoaded', () => {
                        global.calculateMetric.addEventListener('submit', event => {
                            event.preventDefault();
                            calculateMetric()
                                .then(person => { 
                                    global.displayValueMetric.innerHTML = `Your BMI is ${person.bmiValue}`;
                                    global.displayMessageMetric.innerHTML = `and you are ${person.bmiMessage}`;
                                })
                        })
                    });
            
                    const calculateMetric = () => {
                        return new Promise(resolve => {
                            let w = parseFloat(document.getElementById('weight-in-kgs').value);
                            let h = parseFloat(document.getElementById('height-in-cm').value);
                            let person = new Person({
                                weight: w,
                                height: h,
                            });
                            person.calculate_metric();
                            resolve(person);
                        })
                    };
            </script>
      </div>
      
      <div id="Imperial" class="tabcontent">
        <p>Foobar, yo</p>
      </div>




</body>

</html>